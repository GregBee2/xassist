/**
* @preserve
* https://github.com/GregBee2/xassist#readme Version 1.1.1.
*  Copyright 2018 Gregory Beirens.
*  Created on Tue, 17 Apr 2018 11:12:24 GMT.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.xa=t.xa||{})}(this,function(t){"use strict";var n,e="1.1.1",r=Math.round(1e6*Math.random()),i=[],o=!1;function A(t){return{pushUnique:function(t,e,n){return(n=void 0===n||!!n)&&-1!==t.indexOf(e)?t.length:t.push(e)}.bind(null,t),groupSequence:function(t,i){return t.reduce(function(t,e,n,r){return n&&i(r[n-1],e)?t[t.length-1].push(e):t.push([e]),t},[])}.bind(null,t),replaceNull:function(t,n){var e,r=[];e=Array.isArray(n)?function(t,e){return n[e]}:"function"==typeof n?n:function(){return n};for(var i,o=0,s=t.length;o<s;o++)null==(i=t[o])?r.push(e(i,o)):r.push(i);return r}.bind(null,t)}}function s(){if(!(this instanceof s))return new s;this._events={}}function f(t){return new a(t)}function a(t){this.object=t,s.call(this,this),this.currentValues={}}"undefined"!=typeof document&&document.addEventListener("DOMContentLoaded",function(){n=arguments[0],i.forEach(function(t){t[0].call(t[1],n)}),i=[],o=!0},{once:!0}),s.prototype.registerEvent=function(t,e){if(this.hasEvent(t))throw new ReferenceError("event was allready registered");this._events[t]={thisArg:e||this,listeners:[]}},s.prototype.hasEvent=function(t){return this._events.hasOwnProperty(t)},s.prototype.on=function(t,e,n){var r={fn:e};n&&n!==this._events[t].thisArg&&(r.thisArg=n),this.hasEvent(t)&&this._events[t].listeners.push(r)},s.prototype.once=function(t,e,n){var r={fn:e,once:!0};n&&n!==this._events[t].thisArg&&(r.thisArg=n),this.hasEvent(t)&&this._events[t].listeners.push(r)},s.prototype.fire=function(t){var e,n=Array.prototype.slice.call(arguments,1);if(this.hasEvent(t)){e=this._events[t].thisArg;for(var r=0,i=this._events[t].listeners.length;r<i;r+=1)this._events[t].listeners[r].fn.apply(this._events[t].listeners[r].thisArg||e,n);this._events[t].listeners=this._events[t].listeners.filter(function(t){return!t.once})}},s.prototype.off=function(t,e){this.hasEvent(t)&&(this._events[t].listeners=this._events[t].listeners.filter(function(t){return t.fn!==e}))},((a.prototype=Object.create(s.prototype)).constructor=a).prototype.onChange=function(n,t,e){var r=this,i=!1;if(!n||!this.object.hasOwnProperty(n))throw new ReferenceError("key does not exist in Object");this.hasEvent("changeKey"+n)||(this.registerEvent("changeKey"+n,this.object),this.currentValues[n]=this.object[n],i=!0),s.prototype.on.call(this,"changeKey"+n,t,e),i&&Object.defineProperty(this.object,n,{set:function(t){var e=r.currentValues[n];(r.currentValues[n]=t)!==e&&r.fire("changeKey"+n,t,e,n,r.object)},get:function(){return r.currentValues[n]}})},a.prototype.assign=function(){if("function"==typeof Object.assign)return Object.assign.apply(null,[this.object].concat(Array.prototype.slice.call(arguments)));if(null==this.object)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(this.object),e=0;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a.prototype.clone=function(){return JSON.parse(JSON.stringify(this.object))},a.prototype.mergeUnique=function(i){var o=this;return null!=i&&Object.keys(this.object).forEach(function(t){var e,n,r;i.hasOwnProperty(t)&&(o.object[t]=(r=o.object[t],e=typeof r,n=i[t],"boolean"===e?!!n:"number"===e?Number(n):"string"===e?String(n):n))}),this.object},a.prototype.toArray=function(){var e=this;return Object.keys(this.object).map(function(t){return e.object[t]})},a.prototype.toMapArray=function(){var e=this;return Object.keys(this.object).map(function(t){return[t,e.object[t]]})},a.prototype.forEach=function(e,n){var r=this;return n||(n=this.object),Object.keys(this.object).forEach(function(t){e.call(n,r.object[t],t,r.object)},n)},a.prototype.map=function(e,n){var r=this;n||(n=this.object);var i={};return Object.keys(this.object).forEach(function(t){i[t]=e.call(n,r.object[t],t,r.object)},n),i};var d=[59],p={headersIncluded:!1,headerPrefix:"column_",spaceAllowedBetweenDelimiterAndQuote:!0,treatConsecutiveDelmitersAsOne:!1,removeLeadingEmptyRows:!0,removeTrailingEmptyRows:!0,removeInnerEmptyRows:!1,trimValues:!0,emptyValuesAreNull:!0},y={incorrectTrailingQuote:"Unexpected token found after closing Quote for value",incorrectQuote:"Unexpected Quote found inside value"};function m(t,e){return f(t).mergeUnique(e)}function v(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t.charCodeAt(n));return e}function g(t){return new RegExp('["'+t.map(String.fromCharCode).join("")+"\n\r]")}function b(t,y,m,v,g,b){var O=34,w=10,x=13,j=32,M={},S={},D={};return b=void 0===b?1/0:Number(b),function(s){var t,o=[],e=[],n=[],a=!0,u={},c=s.length,h=g||0,r=0,l=c<=0,f=!1,d=[];function p(t){u={id:t,lineIndex:r,characterIndex:h},a=!1}function i(){var t,e,n,r,i;if(l)return M;if(f)return f=!1,S;function o(){return(i=s.charCodeAt(h++))===w?f=!0:i===x&&(f=!0,s.charCodeAt(h)===w&&++h),f}for(t=h,n=!1,r=s.charCodeAt(t)===O||m.spaceAllowedBetweenDelimiterAndQuote;h<c;){if(n){if(r){for(;h<c&&s.charCodeAt(h++)!==O||s.charCodeAt(h++)===O;);if(e=h-=2,m.spaceAllowedBetweenDelimiterAndQuote)for(;h<c&&s.charCodeAt(++h)===j;);else h++;return o()||(l=c<=h)||~v.indexOf(i)?s.slice(t,e).replace(/""/g,'"'):(p("incorrectTrailingQuote"),D)}return p("incorrectQuote"),D}if(o()||~v.indexOf(i))return s.slice(t,h-1);i===O?(n=!0,t=h):i!==j&&(r=!1)}return l=!0,s.slice(t,c)}for(;r<=b&&(t=i())!==M&&a;){for(e=[],n=[];t!==S&&t!==M&&t!==D;){if(m.trimValues&&(t=t.trim()),m.emptyValuesAreNull&&!t.length&&(t=null),e.push(t),!f&&m.treatConsecutiveDelmitersAsOne){for(;h<c&&~v.indexOf(s.charCodeAt(h++)););h--}t=i()}if(a){if(null==(n=y?y(e,r):e)||e.length&&0!==e.join("").length||d.push(r),r++,null==n)continue;o.push(n)}}return function(){for(var t=o.length-1,e=A(d).groupSequence(function(t,e){return e-t==1}),n=[],r=0,i=e.length;r<i;r++)(m.removeLeadingEmptyRows&&0===e[r][0]||m.removeInnerEmptyRows&&0!==e[r][0]&&e[r][e[r].length-1]!==t||m.removeTrailingEmptyRows&&e[r][e[r].length-1]===t)&&(n=n.concat(e[r]));return{result:o.filter(function(t,e){return!~n.indexOf(e)}),emptyRecordLines:d,error:u,validCSV:a,startIndex:g,endIndex:h}}()}(t)}function u(t){return+((t<0?"-.":".")+t.toString().split(".")[1])||0}var c=[{key:"year",re:/(-?\d*(?:[.,]\d*)?)(?:[ ]?y|Y|years?|Years?)(?![a-zA-z])/g},{key:"month",re:/(-?\d*(?:[.,]\d*)?)(?:[ ]?M|months?|Months?)(?![a-zA-z])/g},{key:"day",re:/(-?\d*(?:[.,]\d*)?)(?:[ ]?d|D|days?|Days?)(?![a-zA-z])/g},{key:"hour",re:/(-?\d*(?:[.,]\d*)?)(?:[ ]?h|H|hours?|Hours?)(?![a-zA-z])/g},{key:"minute",re:/(-?\d*(?:[.,]\d*)?)(?:[ ]?m|mins?|Mins?|minutes?|Minutes?)(?![a-zA-z])/g},{key:"second",re:/(-?\d*(?:[.,]\d*)?)(?:[ ]?s|S|secs?|Secs?|seconds?|Seconds?)(?![a-zA-z])/g},{key:"millisecond",re:/(-?\d*(?:[.,]\d*)?)(?:[ ]?ms|millis?|m[sS]ecs?|m[sS]econds?|milli[sS]ecs?|milli[sS]econds?)(?![a-zA-z])/g}];var h=function(){return new l([].slice.call(arguments))};function l(t){this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,this.normalized=!1,this.init(t)}l.prototype._keyOrder=["year","month","day","hour","minute","second","millisecond"],l.prototype.init=function(t){1===t.length&&("string"==typeof t[0]?function(t,e){for(var n,r=0,i=c.length;r<i;r++)for(;n=c[r].re.exec(e);)t[c[r].key]+=parseFloat((n[1]||"0").replace(",","."))}(this,t[0]):"number"==typeof t[0]?this.millisecond+=t[0]:"object"==typeof t[0]&&f(this).mergeUnique(t[0])),1<t.length&&t.forEach(function(t,e){e<this._keyOrder.length&&"number"==typeof t&&(this[this._keyOrder[e]]+=t)},this)};var O={year:{coeff:7/365.2425,exactType:"big"},month:{coeff:7/30.436875,exactType:"big"},week:{coeff:1,exactType:"small"},day:{coeff:7,exactType:"small"},hour:{coeff:168,exactType:"small"},minute:{coeff:10080,exactType:"small"},second:{coeff:604800,exactType:"small"},millisecond:{coeff:6048e5,exactType:"small"}};l.prototype.normalize=function(t){t=void 0===t||!!t,this.normalizeUp(t),this.normalized||(this.normalizeDown(t),this.normalizeUp(!0))},l.prototype.normalizeDown=function(t){var e,n,r,i;t=void 0===t||!!t;for(var o=0,s=this._keyOrder.length;o<s;o++)e=this._keyOrder[o],(r=this._keyOrder[o+1])&&(i=this.getConversionFactor(e,r),t&&!i.exact||(n=u(this[e]),this[e]=this[e]-n,this[r]+=n*i.factor));return this.normalized=0===u(this.month),this},l.prototype.normalizeUp=function(t){var e,n,r,i,o=this._keyOrder.length,s=!0;for(t=void 0===t||!!t;o--;)e=this._keyOrder[o],(n=this._keyOrder[o-1])&&(r=this.getConversionFactor(n,e),t&&!r.exact||(i=this[e],this[e]=i%r.factor,this[n]+=(i-this[e])/r.factor)),o!==this._keyOrder.length-1&&(s=s&&10*this[e]%10/10==0);return this.normalized=s,this},l.prototype.getConversionFactor=function(t,e){if(O.hasOwnProperty(t)&&O.hasOwnProperty(e))return{factor:O[e].coeff/O[t].coeff,exact:O[e].exactType===O[t].exactType};throw new TypeError("Invalid unit conversion type")},l.prototype.valueOf=function(){for(var t,e=0,n=0,r=this._keyOrder.length;n<r;n++)t=this._keyOrder[n],e+=this.getConversionFactor(t,"millisecond").factor*this[t];return e},l.prototype.toString=function(){var t,e=[],n=this.valueOf(),r=h(Math.abs(n));r.normalize(!1);for(var i=0,o=this._keyOrder.length;i<o;i++)0!==r[t=this._keyOrder[i]]&&e.push(r[t]+" "+t+(1<r[t]?"s":""));return n<0&&e.push("ago"),e.join(" ")+"."},l.prototype.format=function(t){var e,n=[],r=this.valueOf(),i=Math.abs(r),o=h(i),s=0,a=1;if(!t)return this.toString();t=1<(t=Math.abs(t))?1:t,o.normalize(!1);for(var u=0,c=this._keyOrder.length;u<c&&t<=a;u++)0!==o[e=this._keyOrder[u]]&&(s+=o[e]*this.getConversionFactor(e,"millisecond").factor,n.push(o[e]+" "+e+(1<o[e]?"s":"")),a=1-s/i);return(s+=1*this.getConversionFactor(e,"millisecond").factor)/i-1<=a&&n.push(n.pop().split(" ").map(function(t,e){return 0==e?+t+1:t}).join(" ")),r<0&&n.push("ago"),n.join(" ")+"."},l.prototype.addDuration=function(t){var e,n,r;for(n=0,r=this._keyOrder.length;n<r;n++)e=this._keyOrder[n],t.hasOwnProperty(e)&&"number"==typeof t[e]&&(this[e]+=t[e]);return this},l.prototype.removeIntervalOfType=function(t,e){return~this._keyOrder.indexOf(t)?(e="number"==typeof e?e:this[t],this[t]-=e,e):0},l.prototype.normalizeMonth=function(t){var e=u(this.month);return this.month=this.month-e,this.day+=t*e,this.normalizeDown()};var w={days:{defaultKey:"long",abbreviation:["S","M","T","W","T","F","S"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},month:{defaultKey:"long",abbreviation:["J","F","M","A","M","J","J","A","S","O","N","D"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]}},x=function(t){if(0<(t=void 0===t?(new Date).getFullYear():t)||t<0)return 0==(3&t)&&(t%25!=0||0==(15&t))},j=function(t,e){var n;return 2===(t=void 0===t?(new Date).getMonth()+1:t)?void 0===(n=x(e))?n:n?29:28:[31,28,31,30,31,30,31,31,30,31,30,31][t-1]},M=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},S=/^(\d{4}|\d{2}|[1-2]?\d{1}|3[0-1])[-/\\.](0?[1-9]|[1-2]\d{1}|3[0-1])[-/\\.](\d{4}|\d{2}|[1-2]?\d{1}|3[0-1])(?:[T ]([0-1]\d|2[0-3]):([0-5]\d)(?::([0-5]\d)(?:[.,](\d*)?)?)?)?$/i,D=function(t,e,n){var r,i=0;return this&&this.constructor&&"XaDate"===this.constructor.name&&(i=1),r=i?this.getDay():t||0,t=(""+arguments[1-i]||w.days.defaultKey).toLowerCase(),e=i?0:n||0,r=(r-((n=!!i||!(void 0!==arguments[3]&&!arguments[3]))?0:1)+e)%7,t=w.days.hasOwnProperty(t)?t:w.days.defaultKey,r=r<0?7+r:r,w.days[t][r]},k=function(t,e){var n,r=0;return this&&this.constructor&&"XaDate"===this.constructor.name&&(r=1),n=r?this.getMonth():t||0,t=(""+arguments[1-r]||w.month.defaultKey).toLowerCase(),t=w.month.hasOwnProperty(t)?t:w.month.defaultKey,n=(n=(n-(!!r||!(void 0!==arguments[2]&&!arguments[2])?0:1))%12)<0?12+n:n,w.month[t][n]},T=function(){return new C([].slice.call(arguments))};function C(t){var e=new(Function.prototype.bind.apply(Date,[Date].concat(t)));return Object.setPrototypeOf(e,C.prototype),e}function _(t){this.e=t}function E(t,e,n,r){this.addFn=t||function(t){return++t},this.removeFn=e||function(t){return--t},this.initialFn=n||function(){return 0},this.getValue=r||function(){return this.value},this.reset()}function H(t,e){var n=e-t.mean;return t.sum+=e,t.len++,t.mean+=n/t.len,t.s+=n*(e-t.mean),t}function F(t,e){var n=t.seen.get(e);return void 0!==n?t.result[n][1]++:t.seen.set(e,t.result.push([e,1])-1),t}function P(n,t){var r=n.seen.get(t);return void 0!==r&&(n.result[r][1]--,n.result[r][1]<1&&(n.seen.delete(t),n.result.splice(r,1),n.seen.forEach(function(t,e){r<=t&&n.seen.set(e,t-1)}))),n}function z(){return{seen:new Map,result:[]}}function I(t,e,n,r){return new E(t,e,n,r)}T.isValidDateString=function(t){var e,n,r,i,o,s={valid:!1,format:[]},a=t.match(S),u=[];if(a){e=parseInt(a[1]),r=parseInt(a[2]),n=parseInt(a[3]),s.hours=parseInt(a[4]||0),s.minutes=parseInt(a[5]||0),s.seconds=a[6]?parseInt(a[6]):0,s.milliSeconds=a[7]?parseInt(a[7]):0,s.valid=!0,s.multipleFormats=!1;var c=function(t){return t<100?50<t?1900+t:2e3+t:t};return i=c(e),!!(u=[{day:e,month:r,year:o=c(n),format:"DMY"},{day:n,month:r,year:i,format:"YMD"},{day:r,month:e,year:o,format:"MDY"},{day:r,month:n,year:i,format:"YDM"}].filter(function(t){return t.day<32&&t.month<13&&(e=t.day,n=t.month,r=t.year,e<=j(n,r));var e,n,r})).length&&(s.day=[],s.month=[],s.year=[],s.multipleFormats=!0,s.format=[],u.forEach(function(t){s.day.push(t.day),s.month.push(t.month),s.year.push(t.year),s.format.push(t.format)}),s)}return!1},T.stringToDate=function(t,e){var n=T.isValidDateString(t);if(n){if("string"!=typeof e)e=0;else if(-1===(e=n.format.indexOf(e.toUpperCase())))return!1;return T(n.year[e],n.month[e]-1,n.day[e],n.hours,n.minutes,n.seconds,n.milliSeconds)}return!1},Object.setPrototypeOf(C.prototype,Date.prototype),C.prototype.isValid=function(){return M(this)},T.getWeekDay=D.bind(null),T.month=k.bind(null),C.prototype.getWeekDay=D,C.prototype.month=k,C.prototype.isLeapYear=function(){return this.isValid()?x(this.getFullYear()):void 0},T.isLeapYear=x,C.prototype.daysInMonth=function(){return this.isValid()?j(this.getMonth()+1,this.getFullYear()):void 0},T.daysInMonth=j,C.prototype._addSmall=function(t){return this.addDays(t.removeIntervalOfType("day")),this.addHours(t.removeIntervalOfType("hour")),this.addMinutes(t.removeIntervalOfType("minute")),this.addSeconds(t.removeIntervalOfType("second")),this.addMilliseconds(t.removeIntervalOfType("millisecond")),this},C.prototype._addBig=function(t){var e,n=this.getDate(),r=10*t.month%10/10,i=t.month-r;this.addYears(t.removeIntervalOfType("year")),this.addMonths(t.removeIntervalOfType("month",i)),t.month=r,e=this.getMonth(),this.setDate(n),this.getMonth()!==e&&this.setDate(0)},C.prototype.format=function(t){var s={month:[function(t){return(t.getMonth()+1).toString()},function(t){return("0"+(t.getMonth()+1)).slice(-2)},function(t){return t.month("short")},function(t){return t.month("long")},function(t){return t.month("abbreviation")}],day:[function(t){return t.getDate().toString()},function(t){return("0"+t.getDate()).slice(-2)},function(t){return t.getWeekDay("short")},function(t){return t.getWeekDay("long")},function(t){return t.getWeekDay("abbreviation")}],year:[function(t){return t.getFullYear().toString().slice(-2)},function(t){return t.getFullYear().toString()}],time:[function(t,e){return t[e]().toString()},function(t,e){return("0"+t[e]()).slice(-2)}],millisecond:[function(t,e){return t.getMilliseconds().toString().slice(0,e)}]},a=this;return("1"+t).replace(/[\s\S]([dD]+|M[Mm]?|[Mm]{3,}|[yY]+|[hH]+|m{1,2}|[sS]+|[,.]0+)/g,function(t){var e,n,r,i=t[0],o=t.slice(1);return"^"===i?o:i+(n=(e=o)[0],r=e.length,"M"===n||"m"===n&&2<r?s.month[Math.min(r,5)-1](a):"d"===n||"D"===n?s.day[Math.min(r,5)-1](a):"y"===n||"Y"===n?s.year[(2<r)+0](a):"m"===n&&r<3?s.time[r-1](a,"getMinutes"):"s"===n||"S"===n?s.time[Math.min(r,2)-1](a,"getSeconds"):"h"===n||"H"===n?s.time[Math.min(r,2)-1](a,"getHours"):"."===n||","===n?s.millisecond[0](a,r-1):void 0)}).slice(1)},C.prototype.until=function(t){if(M(t)||(t=new C([].slice.call(arguments))),!t.isValid())throw new TypeError("until() needs a date or parseable dateargumenrs");return h(t.valueOf()-this.valueOf())},C.prototype.add=function(t){var e=[].slice.call(arguments),n=e.pop();return"boolean"!=typeof n&&(e.push(n),n=!0),"XaDuration"!==t.constructor.name&&(t=h.apply(null,e)),t.normalizeDown(),n&&(this._addBig(t),t.normalizeMonth(this.daysInMonth())),this._addSmall(t),n||(t.normalizeMonth(this.daysInMonth()),this._addSmall(t),this._addBig(t)),this},C.prototype.addMonths=function(t){var e,n;return"number"!=typeof t||(e=this.getDate(),this.setMonth(this.getMonth()+t,1),n=this.getMonth(),this.setDate(e),this.getMonth()!==n&&this.setDate(0)),this},C.prototype.addYears=function(t){var e;return"number"!=typeof t||(e=this.getMonth(),this.setFullYear(this.getFullYear()+t,e),this.getMonth()!==e&&this.setDate(0)),this},C.prototype.addDays=function(t){return"number"!=typeof t||this.setDate(this.getDate()+t),this},C.prototype.addHours=function(t){return"number"!=typeof t||this.setHours(this.getHours()+t),this},C.prototype.addMinutes=function(t){return"number"!=typeof t||this.setMinutes(this.getMinutes()+t),this},C.prototype.addSeconds=function(t){return"number"!=typeof t||this.setSeconds(this.getSeconds()+t),this},C.prototype.addMilliseconds=function(t){return"number"!=typeof t||this.setMilliseconds(this.getMilliseconds()+t),this},_.prototype={addClass:function(t){return this.e.className=this.e.className+" "+t,this},removeClass:function(t){return this.e.className=this.e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)","g"),""),this},hasClass:function(t){return new RegExp("(?:^|\\s)"+t+"(?!\\S)").test(this.e.className)},replaceClass:function(t,e){return this.e.className=this.e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)")," "+e),this},toggleClass:function(t,e){return(e=void 0===e?!this.hasClass(t):!!e)?this.addClass(t):this.removeClass(t)},attr:function(t,e){return this.e.setAttribute(t,e),this},parents:function(){for(var t=[],e=this.e;e;)t.unshift(new _(e)),e=e.parentNode;return t},isVisible:function(){return!!(this.e.offsetWidth||this.e.offsetHeight||void 0===this.e.getClientRects||this.e.getClientRects().length)},getDimensions:function(){var t,e,n,r,i={position:"absolute",visibility:"hidden",display:"block"},o={},s=[];if(this.isVisible())return this.e.getBoundingClientRect();for(r=this.parents(),e=1,n=r.length;e<n;e++)"none"===r[e].e.style.display&&(o={elm:r[e]},Object.keys(i).forEach(function(t){o[t]=r[e].e.style[t],r[e].e.style[t]=i[t]}),s.push(o));for(t=this.e.getBoundingClientRect(),n=s.length,e=0;e<n;e++)Object.keys(i).forEach(function(t){s[e].elm.e.style[t]=s[e][t]});return t}},E.prototype.add=function(t){return this.value=this.addFn(this.value,t),this},E.prototype.remove=function(t){return this.value=this.removeFn(this.value,t),this},E.prototype.reset=function(){return this.value=this.initialFn(),this},E.prototype.addArray=function(t){for(var e=0,n=t.length;e<n;e++)this.add(t[e]);return this},E.prototype.removeArray=function(t){for(var e=0,n=t.length;e<n;e++)this.remove(t[e]);return this};var N=I;N.create=I,N.count=function(){return new E},N.countUnique=function(n){var t,e;return n?(t=function(t,e){return F(t,e[n])},e=function(t,e){return P(t,e[n])}):(t=F,e=P),new E(t,e,z,function(){return this.value.result.length})},N.listValues=function(n,t){var e,r,i=", ",o="[[undefined]]",s="[[empty]]";return 0===arguments.length||"object"==typeof n?(e=F,r=P,t="object"==typeof n?n:{}):(e=function(t,e){return F(t,e[n])},r=function(t,e){return P(t,e[n])},t=t||{}),i=t.seperator||i,o=t.undefinedValue||o,s=t.emptyValue||s,new E(e,r,z,function(){return this.value.result.map(function(t){return void 0===t[0]?o:""===t[0]?s:t[0]}).join(i)})},N.sum=function(n){var t,e;return n?(t=function(t,e){return t+(+e[n]||0)},e=function(t,e){return t-(+e[n]||0)}):(t=function(t,e){return t+(+e||0)},e=function(t,e){return t-(+e||0)}),new E(t,e)},N.average=function(n){var t,e;return n?(t=function(t,e){return{sum:t.sum+(+e[n]||0),len:++t.len}},e=function(t,e){return{sum:t.sum-(+e[n]||0),len:--t.len}}):(t=function(t,e){return{sum:t.sum+(+e||0),len:++t.len}},e=function(t,e){return{sum:t.sum-(+e||0),len:--t.len}}),new E(t,e,function(){return{sum:0,len:0}},function(){return this.value.sum/this.value.len})},N.standardDeviation=function(n){return new E(n?function(t,e){return H(t,+e[n]||0)}:function(t,e){return H(t,+e||0)},function(){throw new Error("not yet implemented")},function(){return{sum:0,len:0,mean:0,s:0}},function(){return t=this.value,e=t.len,n=t.mean,i=t.s/(e-1),{standardDeviation:r=Math.sqrt(i),average:n,length:e,variance:i,standardError:r/Math.sqrt(e),sum:t.sum};var t,e,n,r,i})};var V=function(){if("undefined"!=typeof document){for(var t=[function(){return new XMLHttpRequest},function(){return new window.ActiveXObject("Msxml2.XMLHTTP")},function(){return new window.ActiveXObject("Microsoft.XMLHTTP")}],e=0,n=t.length;e<n;e++){try{t[e]()}catch(t){continue}return t[e]}throw new Error("AjaxHandler: Could not create an XHR object.")}return function(){return!1}}(),R={200:"ok",304:"Not Modified (does NOT count as success!)",400:"bad request",401:"authentication needed",403:"unauthorized (no auth needed)",404:"not found",414:"uri to long",429:"too many requests",500:"internal server error",503:"service unavailable (try again)"};function Y(t,e){var n=["text","json"];this.callbacks={success:[],fail:[],always:[],progress:[]},void 0===e&&(e={}),this.url=t,this.method=e.method&&"POST"===e.method?"POST":"GET",this.done=!1,this.success=!1,this.xhr=V(),this.responseType=n[n.indexOf(e.type)]||n[0],this.postVars=e.data||null,this.init()}Y.prototype.addSuccessHandler=function(t,e){e||(e=this.xhr),this.done&&this.success?t.apply(e,this.eventDetails):this.callbacks.success.push([t,e])},Y.prototype.addFailHandler=function(t,e){e||(e=this.xhr),this.done&&!this.success?t.apply(e,this.eventDetails):this.callbacks.fail.push([t,e])},Y.prototype.addAlwaysHandler=function(t,e){e||(e=this.xhr),this.done?t.apply(e,this.eventDetails):this.callbacks.always.push([t,e])},Y.prototype.addProgressHandler=function(t,e){e||(e=this.xhr),this.done||this.callbacks.progress.push([t,e])},Y.prototype.removeHandlers=function(){this.callbacks={success:[],fail:[],always:[],progress:[]}},Y.prototype.detailedStatus=function(){var t,e,n,r=this.xhr.status+" "+(t=this.xhr.status,e=["1xx Informational responses","2xx Success","3xx Redirection","4xx Client errors","5xx Server errors"],0<=(n=Math.floor(t/100)-1)&&n<e.length?e[n]:"?xx Unknown HTTPCode-range ("+t+")");return R.hasOwnProperty(this.xhr.status)&&(r+="-"+R[this.xhr.status]),r},Y.prototype.init=function(){this.xhr.addEventListener("progress",this.updateProgress.bind(this)),this.xhr.open(this.method,this.url,!0),this.xhr.onreadystatechange=this.readyStateEvent.bind(this),this.xhr.send(this.postVars)},Y.prototype.updateProgress=function(t){this.executeHandlers(["progress"],[t])},Y.prototype.getAbsoluteURL=function(){return t=this.url,r=document,i=r.getElementsByTagName("base")[0],o=i&&i.href,s=r.head||r.getElementsByTagName("head")[0],a=i||s.appendChild(r.createElement("base")),u=r.createElement("a"),a.href=e||"",u.href=t,n=u.href,i?i.href=o:s.removeChild(a),n;var t,e,n,r,i,o,s,a,u},Y.prototype.readyStateEvent=function(){var t;if(2===this.xhr.readyState)return t=this.xhr.getResponseHeader("content-type").split("/"),void(this.contenType={type:t[0],subType:t[1]});4===this.xhr.readyState&&(this.eventDetails=[this.xhr.response,this.detailedStatus(),this.xhr,this],this.done=!0,200<=this.xhr.status&&this.xhr.status<300&&(this.success=!0,this.eventDetails[0]=this.parseType(this.eventDetails[0])),this.success?this.executeHandlers(["success","always"],this.eventDetails):this.executeHandlers(["fail","always"],this.eventDetails),this.removeHandlers())},Y.prototype.parseType=function(e){var n;if("json"===this.responseType)try{n=JSON.parse(e)}catch(t){this.success=!1,n="Problem parsing JSON: partial response: "+e.substring(1,157)+"..."}else n=e;return n},Y.prototype.executeHandlers=function(t,e){var n,r;for(n=0,r=t.length;n<r;n++)this.callbacks.hasOwnProperty(t[n])&&this.callbacks[t[n]].forEach(function(t){t[0].apply(t[1],e)})},t.version=function(){return e},t.id=function(t){return(arguments.length?t+"_":"")+r++},t.ready=function(t,e){e||(e=document),o?t.call(e,n):i.push([t,e])},t.template=function(t,n,r){return r=r||"",t.replace(/\${([^}]*)}/g,function(t,e){return e.split(".").reduce(function(t,e){return t.hasOwnProperty(e)?t[e]:r},n)})},t.array=A,t.EventDispatcher=s,t.object=f,t.csv=function(){var c=f(p).clone(),h=d,l=0,e=g(h);function a(t){var e,n,r,i,o,s;for(l=0;e=b(t,void 0,c,h,l,0),l=e.endIndex,1!==e.result.length&&e.validCSV;);if(e.validCSV){e.result[0]=A(e.result[0]).replaceNull(function(t,e){return c.headerPrefix+e});for(var a=0,u=e.result[0].length;a<u;a++){for(o=e.result[0][a];e.result[0].indexOf(o)<a&&-1<e.result[0].indexOf(o);)1===(i=o.split("_")).length?(n=i[0],r=-1):(r=i.pop(),s=r,!isNaN(parseFloat(s))&&isFinite(s)&&Number(r)%1==0?(r=Number(r),n=i.join("_")):(n=i.concat(r).join("_"),r=-1)),o=n+"_"+ ++r;e.result[0][a]=o}}return e}function u(t,e){return t.header=e,t.validCSV||(t.error.message=y[t.error.id]),t}function s(t){return null===t?"":e.test(t)?'"'+t.replace(/"/g,'""')+'"':t}return 1===arguments.length?"string"==typeof arguments[0]?(h=v(arguments[0]),e=g(h)):c=m(c,arguments[0]):1<arguments.length&&(h=v(arguments[0]),e=g(h),c=m(c,arguments[1])),{toArray:function(t,e,n){var r;if(c.headersIncluded){if(!(r=a(t)).validCSV)return u(r);r=r.result[0]}else r=[];return n=n||r,u(b(t,e,c,h,l),n)},toObject:function(t,n,e){var r,i,o,s;if(c.headersIncluded){if(!(i=a(t)).validCSV)return u(i);i=i.result[0]}else i=[];return o=e=e||i,s=c.headerPrefix,o=Array.isArray(o)?o:[],s=s||"field_",s=o.reduce(function(t,e){for(;e.substr(0,t.length)===t;)t+="_";return t},s),r=function(t){return t.reduce(function(t,e,n){return t[o[n]||s+n]=e,t},{})},u(b(t,n?function(t,e){return n(r(t),e)}:r,c,h,l),e)},fromObject:function(t,e){var n,r,i,o=String.fromCharCode(h[0]);return i=(e=e||[]).reduce(function(t,e,n){return t[e]=n,t},{}),n=function(t,e){var n=[];return f(t).forEach(function(t,e){i.hasOwnProperty(e)||(i[e]=Object.keys(i).length),n[i[e]]=s(t)}),n.join(e)},r=function(t){return n(t,o)},e=e||[],t.map(r),[e.map(function(t){return s(t)}).join(o)].concat(t.map(r)).join("\n")},fromArray:function(t,e){var n=String.fromCharCode(h[0]),r=function(t){return e=n,t.map(function(t){return s(t)}).join(e);var e};return[r(e=e||[])].concat(t.map(r)).join("\n")}}},t.date=T,t.dom=function(t){return new _(t)},t.aggregate=N,t.ajax=function(t,e){var r,i=new Y(t,e);return r={on:function(t,e,n){if("success"===t)i.addSuccessHandler(e,n);else if("fail"===t)i.addFailHandler(e,n);else if("progress"===t)i.addProgressHandler(e,n);else{if("loadEnd"!==t)throw new ReferenceError("event was not registerd");i.addAlwaysHandler(e,n)}return r},success:function(t,e){return i.addSuccessHandler(t,e),r},fail:function(t,e){return i.addFailHandler(t,e),r},always:function(t,e){return i.addAlwaysHandler(t,e),r},onProgress:function(t,e){return i.addProgressHandler(t,e),r},getResponse:function(){return i.xhr.response},getHTTPCode:function(t){return(t=void 0===t||!!t)?i.detailedStatus():i.xhr.status},_getHandler:function(){return i},_getXHRObject:function(){return i.xhr}}},Object.defineProperty(t,"__esModule",{value:!0})});