/**
* @preserve
* https://github.com/GregBee2/xassist#readme Version 0.6.18.
*  Copyright 2018 Gregory Beirens.
*  Created on Thu, 15 Mar 2018 13:19:22 GMT.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.xa=e.xa||{})}(this,function(e){"use strict";var n,t="0.6.18",r=Math.round(1e6*Math.random()),o=[],i=!1;function x(e){return{pushUnique:function(e,t,n){return(n=void 0===n||!!n)&&-1!==e.indexOf(t)?e.length:e.push(t)}.bind(null,e),groupSequence:function(e,o){return e.reduce(function(e,t,n,r){return n&&o(r[n-1],t)?e[e.length-1].push(t):e.push([t]),e},[])}.bind(null,e),replaceNull:function(e,n){var t,r=[];t=Array.isArray(n)?function(e,t){return n[t]}:"function"==typeof n?n:function(){return n};for(var o,i=0,u=e.length;i<u;i++)null==(o=e[i])?r.push(t(o,i)):r.push(o);return r}.bind(null,e)}}function u(e){if(!(this instanceof u))return new u;this._parent=e,this._events={}}function h(e){return new c(e)}function c(e){this.object=e,u.call(this,this),this.currentValues={}}document.addEventListener("DOMContentLoaded",function(){n=arguments[0],o.forEach(function(e){e[0].call(e[1],n)}),o=[],i=!0},{once:!0}),u.prototype.registerEvent=function(e,t){if(this.hasEvent(e))throw new ReferenceError("event was allready registered");this._events[e]={thisArg:t||this._parent,listeners:[]}},u.prototype.hasEvent=function(e){return this._events.hasOwnProperty(e)},u.prototype.on=function(e,t,n){var r={fn:t};n&&n!==this._events[e].thisArg&&(r.thisArg=n),this.hasEvent(e)&&this._events[e].listeners.push(r)},u.prototype.once=function(e,t,n){var r={fn:t,once:!0};n&&n!==this._events[e].thisArg&&(r.thisArg=n),this.hasEvent(e)&&this._events[e].listeners.push(r)},u.prototype.fire=function(e){var t,n=Array.prototype.slice.call(arguments,1);if(this.hasEvent(e)){t=this._events[e].thisArg;for(var r=0,o=this._events[e].listeners.length;r<o;r+=1)this._events[e].listeners[r].fn.apply(this._events[e].listeners[r].thisArg||t,n);this._events[e].listeners=this._events[e].listeners.filter(function(e){return!e.once})}},u.prototype.off=function(e,t){this.hasEvent(e)&&(this._events[e].listeners=this._events[e].listeners.filter(function(e){return e.fn!==t}))},((c.prototype=Object.create(u.prototype)).constructor=c).prototype.onChange=function(n,e,t){var r=this,o=!1;if(!n||!this.object.hasOwnProperty(n))throw new ReferenceError("key does not exist in Object");this.hasEvent("changeKey"+n)||(this.registerEvent("changeKey"+n,this.object),this.currentValues[n]=this.object[n],o=!0),u.prototype.on.call(this,"changeKey"+n,e,t),o&&Object.defineProperty(this.object,n,{set:function(e){var t=r.currentValues[n];(r.currentValues[n]=e)!==t&&r.fire("changeKey"+n,e,t,n,r.object)},get:function(){return r.currentValues[n]}})},c.prototype.assign=function(){if("function"==typeof Object.assign)return Object.assign.apply(null,[this.object].concat(Array.prototype.slice.call(arguments)));if(null==this.object)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(this.object),t=0;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.prototype.clone=function(){return JSON.parse(JSON.stringify(this.object))},c.prototype.mergeUnique=function(o){var i=this;return null!=o&&Object.keys(this.object).forEach(function(e){var t,n,r;o.hasOwnProperty(e)&&(i.object[e]=(r=i.object[e],t=typeof r,n=o[e],"boolean"===t?!!n:"number"===t?Number(n):"string"===t?String(n):n))}),this.object},c.prototype.toArray=function(){var t=this;return Object.keys(this.object).map(function(e){return t.object[e]})},c.prototype.toMapArray=function(){var t=this;return Object.keys(this.object).map(function(e){return[e,t.object[e]]})},c.prototype.forEach=function(t,n){var r=this;return n||(n=this.object),Object.keys(this.object).forEach(function(e){t.call(n,r.object[e],e,r.object)},n)},c.prototype.map=function(t,n){var r=this;n||(n=this.object);var o={};return Object.keys(this.object).forEach(function(e){o[e]=t.call(n,r.object[e],e,r.object)},n),o};var p=[59],d={headersIncluded:!1,headerPrefix:"column_",spaceAllowedBetweenDelimiterAndQuote:!0,treatConsecutiveDelmitersAsOne:!1,removeLeadingEmptyRows:!0,removeTrailingEmptyRows:!0,removeInnerEmptyRows:!1,trimValues:!0,emptyValuesAreNull:!0},v={incorrectTrailingQuote:"Unexpected token found after closing Quote for value",incorrectQuote:"Unexpected Quote found inside value"};function y(e,t){return h(e).mergeUnique(t)}function g(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e.charCodeAt(n));return t}function b(e){return new RegExp('["'+e.map(String.fromCharCode).join("")+"\n\r]")}function j(e,v,y,g,b,j){var m=34,A=10,O=13,w=32,E={},_={},C={};return j=void 0===j?1/0:Number(j),function(u){var e,i=[],t=[],n=[],c=!0,s={},a=u.length,f=b||0,r=0,l=a<=0,h=!1,p=[];function d(e){s={id:e,lineIndex:r,characterIndex:f},c=!1}function o(){var e,t,n,r,o;if(l)return E;if(h)return h=!1,_;function i(){return(o=u.charCodeAt(f++))===A?h=!0:o===O&&(h=!0,u.charCodeAt(f)===A&&++f),h}for(e=f,n=!1,r=u.charCodeAt(e)===m||y.spaceAllowedBetweenDelimiterAndQuote;f<a;){if(n){if(r){for(;f<a&&u.charCodeAt(f++)!==m||u.charCodeAt(f++)===m;);if(t=f-=2,y.spaceAllowedBetweenDelimiterAndQuote)for(;f<a&&u.charCodeAt(++f)===w;);else f++;return i()||(l=a<=f)||~g.indexOf(o)?u.slice(e,t).replace(/""/g,'"'):(d("incorrectTrailingQuote"),C)}return d("incorrectQuote"),C}if(i()||~g.indexOf(o))return u.slice(e,f-1);o===m?(n=!0,e=f):o!==w&&(r=!1)}return l=!0,u.slice(e,a)}for(;r<=j&&(e=o())!==E&&c;){for(t=[],n=[];e!==_&&e!==E&&e!==C;){if(y.trimValues&&(e=e.trim()),y.emptyValuesAreNull&&!e.length&&(e=null),t.push(e),!h&&y.treatConsecutiveDelmitersAsOne){for(;f<a&&~g.indexOf(u.charCodeAt(f++)););f--}e=o()}if(c){if(null==(n=v?v(t,r):t)||t.length&&0!==t.join("").length||p.push(r),r++,null==n)continue;i.push(n)}}return function(){for(var e=i.length-1,t=x(p).groupSequence(function(e,t){return t-e==1}),n=[],r=0,o=t.length;r<o;r++)(y.removeLeadingEmptyRows&&0===t[r][0]||y.removeInnerEmptyRows&&0!==t[r][0]&&t[r][t[r].length-1]!==e||y.removeTrailingEmptyRows&&t[r][t[r].length-1]===e)&&(n=n.concat(t[r]));return{result:i.filter(function(e,t){return!~n.indexOf(t)}),emptyRecordLines:p,error:s,validCSV:c,startIndex:b,endIndex:f}}()}(e)}e.version=function(){return t},e.id=function(e){return(arguments.length?e+"_":"")+r++},e.ready=function(e,t){t||(t=document),i?e.call(t,n):o.push([e,t])},e.template=function(e,n,r){return r=r||"",e.replace(/\${([^}]*)}/g,function(e,t){return t.split(".").reduce(function(e,t){return e.hasOwnProperty(t)?e[t]:r},n)})},e.array=x,e.EventDispatcher=u,e.object=h,e.csv=function(){var a=h(d).clone(),f=p,l=0,t=b(f);function c(e){var t,n,r,o,i,u;for(l=0;t=j(e,void 0,a,f,l,0),l=t.endIndex,1!==t.result.length&&t.validCSV;);if(t.validCSV){t.result[0]=x(t.result[0]).replaceNull(function(e,t){return a.headerPrefix+t});for(var c=0,s=t.result[0].length;c<s;c++){for(i=t.result[0][c];t.result[0].indexOf(i)<c&&-1<t.result[0].indexOf(i);)1===(o=i.split("_")).length?(n=o[0],r=-1):(r=o.pop(),u=r,!isNaN(parseFloat(u))&&isFinite(u)&&Number(r)%1==0?(r=Number(r),n=o.join("_")):(n=o.concat(r).join("_"),r=-1)),i=n+"_"+ ++r;t.result[0][c]=i}}return t}function s(e,t){return e.header=t,e.validCSV||(e.error.message=v[e.error.id]),e}function u(e){return null===e?"":t.test(e)?'"'+e.replace(/"/g,'""')+'"':e}return 1===arguments.length?"string"==typeof arguments[0]?(f=g(arguments[0]),t=b(f)):a=y(a,arguments[0]):1<arguments.length&&(f=g(arguments[0]),t=b(f),a=y(a,arguments[1])),{toArray:function(e,t,n){var r;if(a.headersIncluded){if(!(r=c(e)).validCSV)return s(r);r=r.result[0]}else r=[];return n=n||r,s(j(e,t,a,f,l),n)},toObject:function(e,n,t){var r,o,i,u;if(a.headersIncluded){if(!(o=c(e)).validCSV)return s(o);o=o.result[0]}else o=[];return i=t=t||o,u=a.headerPrefix,i=Array.isArray(i)?i:[],u=u||"field_",u=i.reduce(function(e,t){for(;t.substr(0,e.length)===e;)e+="_";return e},u),r=function(e){return e.reduce(function(e,t,n){return e[i[n]||u+n]=t,e},{})},s(j(e,n?function(e,t){return n(r(e),t)}:r,a,f,l),t)},fromObject:function(e,t){var n,r,o,i=String.fromCharCode(f[0]);return o=(t=t||[]).reduce(function(e,t,n){return e[t]=n,e},{}),n=function(e,t){var n=[];return h(e).forEach(function(e,t){o.hasOwnProperty(t)||(o[t]=Object.keys(o).length),n[o[t]]=u(e)}),n.join(t)},r=function(e){return n(e,i)},t=t||[],e.map(r),[t.map(function(e){return u(e)}).join(i)].concat(e.map(r)).join("\n")},fromArray:function(e,t){var n=String.fromCharCode(f[0]),r=function(e){return t=n,e.map(function(e){return u(e)}).join(t);var t};return[r(t=t||[])].concat(e.map(r)).join("\n")}}},Object.defineProperty(e,"__esModule",{value:!0})});